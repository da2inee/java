# 자바 컴파일 과정

자바는 **한 번 작성하면 어디서든 실행**된다는 말을 들어봤을 거예요.  
그게 가능한 이유가 **컴파일 과정**에 있습니다.

---

## 전체 흐름 (한 줄 요약)

```
.java (소스 코드)  →  javac  →  .class (바이트코드)  →  JVM  →  실행
```

- **우리가 쓰는 건**: `.java` 파일 (사람이 읽고 쓰는 코드)
- **컴퓨터가 직접 실행하는 건**: `.class` 파일 (바이트코드)
- **중간에서 번역·실행하는 역할**: **JVM**(Java Virtual Machine)

---

## 1단계: 소스 코드 (.java)

- 우리가 작성하는 **텍스트 파일**입니다.
- 예: `HelloWorld.java`
- 사람이 읽고 수정하는 코드입니다.
- 이 상태에서는 **그냥 텍스트**라서, OS가 이걸 그대로 실행하지는 못합니다.

---

## 2단계: 컴파일 (javac)

**컴파일** = 소스 코드를 **다른 형태(바이트코드)**로 바꾸는 과정

- **명령어**: `javac 파일명.java`
- **결과**: 같은 이름의 `.class` 파일이 생깁니다.  
  예: `HelloWorld.java` → `HelloWorld.class`
- **역할**: 문법 검사 + `.java`를 **바이트코드**로 변환

**바이트코드**란?

- 0과 1에 가까운 **중간 코드**입니다.
- **CPU가 직접 실행하는 기계어는 아니고**,  
  **JVM이 이해하는 명령어**입니다.
- 그래서 **OS나 CPU가 달라도** 같은 `.class`를 쓸 수 있습니다.

---

## 3단계: 실행 (java = JVM)

- **명령어**: `java 클래스이름` (`.class`는 붙이지 않음)  
  예: `java HelloWorld`
- **역할**: **JVM**이 해당 `.class`를 읽고,  
  바이트코드를 **그 OS/CPU에 맞는 기계어로 해석하면서** 실행합니다.

**클래스 로더(ClassLoader)**  
- JVM 안의 **클래스 로더**가 `.class` 파일을 찾아서 **JVM 메모리로 로드**합니다.
- 그래서 흐름을 더 정확히 쓰면:  
  `.class` → **클래스 로더**가 JVM으로 전달 → JVM이 바이트코드 해석·실행

즉,

- **javac**: “.java → .class 로 한 번 번역”
- **java**: “JVM 켜고, .class를 읽어서 실제로 실행”

---

## 그림으로 보기

```
[ HelloWorld.java ]     [ HelloWorld.class ]      [ 화면: Hello, Java! ]
       (소스)                  (바이트코드)                 (실행 결과)
          |                         |                            ^
          |  javac HelloWorld.java  |   java HelloWorld          |
          | ----------------------> | -------------------------->|
          |     컴파일 한 번         |   JVM이 매번 해석·실행      |
```

- **컴파일은 한 번** (코드 바꿀 때마다 다시 `javac`)
- **실행은 할 때마다** `java 클래스이름`으로 JVM이 .class를 실행

---

## 왜 이렇게 나눠져 있나? (바이트코드 + JVM)

- **바이트코드**는 **OS/CPU에 무관**한 형태입니다.
- **JVM**만 Windows용, Mac용, Linux용 등으로 따로 만들면 됩니다.
- 그래서 **같은 .class 파일**을  
  Windows, Mac, Linux 어디서나 **같은 명령**으로 실행할 수 있습니다.  
  → **“Write Once, Run Anywhere”**

---

## 실제로 해보기

이 폴더에 `HelloWorld.java`를 두고:

```bash
# 1. 컴파일 → .class 생성
javac HelloWorld.java

# 2. .class 목록 확인 (HelloWorld.class 생겼는지)
ls

# 3. 실행 (JVM이 .class 실행)
java HelloWorld
```

- **javac**를 안 하고 **java**만 치면?  
  → “클래스를 찾을 수 없음” 같은 에러가 납니다. (`.class`가 없으니까)
- **java HelloWorld.class**처럼 쓰면?  
  → 틀린 거예요. `java HelloWorld`만 씁니다.

---

## 정리 표

| 단계 | 입력 | 명령 | 출력 |
|------|------|------|------|
| 컴파일 | `.java` | `javac 파일명.java` | `.class` (바이트코드) |
| 실행 | `.class` | `java 클래스이름` | 프로그램 동작 (실행 결과) |

**오늘 공부 포인트**

1. 자바는 **.java → (javac) → .class → (JVM) → 실행** 순서다.
2. **컴파일** = 소스 코드를 바이트코드로 바꾸는 것 (javac).
3. **실행** = JVM이 .class를 읽고 해석해서 돌리는 것 (java).
4. 바이트코드 + JVM 덕분에 **한 번 작성한 코드를 여러 OS에서 실행**할 수 있다.

이해한 걸 바탕으로 `01-hello-world`에서 `javac` / `java` 한 번씩 해보면 좋아요.
